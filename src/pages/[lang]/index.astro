---
import ComingSoon from '../../components/CommingSoon.vue';
import { ui } from '../../i18n/ui';

export async function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'ru' } },
  ];
}

const { lang } = Astro.params;

if (!ui[lang]) {
  return new Response(null, { status: 404 });
}

const t = ui[lang];
---

<html lang={lang}>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>{t['page.title']}</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jura:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Скрипт для Particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>

  <style is:global>
    @keyframes breathing-gradient { from { background-size: 100% 100%; } to { background-size: 130% 130%; } }
    
    body {
      color: #ffffff; 
      font-family: 'Jura', sans-serif; 
      margin: 0; 
      overflow: hidden; 
      min-height: 100vh; 
      display: flex; 
      flex-direction: column;
      background-color: #111111;
      background-image: radial-gradient(ellipse at center, rgba(139, 92, 246, 0.1), #111111 70%);
      background-size: 100% 100%; 
      background-position: center;
      animation: breathing-gradient 8s infinite alternate ease-in-out;
    }

    #tsparticles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0; /* Размещаем фон позади всего контента */
    }
    
    header, main, footer { 
      position: relative; 
      z-index: 1; /* Убедимся, что контент поверх фона */
    }

    main { 
      flex-grow: 1; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
    }
  </style>
</head>
<body>
  
  <!-- Контейнер для анимации частиц -->
  <div id="tsparticles"></div>

  <header>
    <a href={`/${lang}/`} class="logo-container">
      <span class="logo-text">{t['nav.ghost']}</span>
      <img src="/logo.png" alt="Ghost Tunnel Logo" class="logo-image" />
      <span class="logo-tag">{t['nav.tunnel']}</span>
    </a>
    <div class="lang-switcher">
      <a href="/en/" class:list={{ active: lang === 'en' }}>EN</a>
      <span>/</span>
      <a href="/ru/" class:list={{ active: lang === 'ru' }}>RU</a>
    </div>
  </header>

  <main>
    <ComingSoon 
      title={t['waitlist.title']} 
      subtitle={t['waitlist.subtitle']} 
    />
  </main>
  
  <footer>
    <div class="footer-content">
      <p>Developed by <a href="https://github.com/waste3d" target="_blank" rel="noopener noreferrer">waste3d</a> w/ love</p>
    </div>
  </footer>

  <script is:inline>
    document.addEventListener('DOMContentLoaded', function () {
      tsParticles.load("tsparticles", {
        fpsLimit: 60,
        particles: {
          number: {
            value: 60, // Было 80. Сделали поменьше.
            density: {
              enable: true,
              value_area: 800
            }
          },
          color: {
            value: "#ffffff"
          },
          shape: {
            type: "circle"
          },
          opacity: {
            value: 0.3, // Было 0.5. Частицы стали намного прозрачнее.
            random: true,
          },
          size: {
            value: 1.7, // Было 2. Частицы стали меньше.
            random: true,
          },
          links: {
            enable: true,
            distance: 150,
            color: "#ffffff",
            opacity: 0.1, // Было 0.1. Линии стали почти невидимыми.
            width: 1
          },
          move: {
            enable: true,
            speed: 0.4, // Немного замедлили движение.
            direction: "none",
            out_mode: "out",
          }
        },
        interactivity: {
          detectsOn: "canvas",
          events: {
            onHover: {
              enable: true,
              mode: "grab"
            },
            resize: true
          },
          modes: {
            grab: {
              distance: 140,
              links: {
                opacity: 0.1 // Эффект при наведении тоже сделали слабее.
              }
            }
          }
        },
        detectRetina: true
      });
    });
  </script>

</body>
</html>

<style>
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem 2rem;
    height: 80px; 
    box-sizing: border-box;
  }
  .logo-container { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: inherit; }
  .logo-image { height: 68px; width: auto; display: block; }
  .logo-text { font-size: 1.125rem; font-weight: 700; color: #ffffff; text-transform: uppercase; }
  .logo-tag { font-size: 1.125rem; font-weight: 700; color: #bd8dc9; }

  .lang-switcher { display: flex; gap: 0.5rem; align-items: center; }
  .lang-switcher a { color: #888; text-decoration: none; font-weight: 700; transition: color 0.2s; }
  .lang-switcher a:hover { color: #fff; }
  .lang-switcher a.active { color: #bd8dc9; }

  footer {
    padding: 2rem;
    box-sizing: border-box;
    width: 100%;
  }

  .footer-content {
    text-align: center;
    color: #888;
    font-size: 0.9rem;
  }

  .footer-content a {
    color: #aaa;
    text-decoration: none;
    transition: color 0.2s;
  }

  .footer-content a:hover {
    color: #bd8dc9;
  }
</style>